exports.ids=[3],exports.modules={44:function(t,n,a){var e=a(62);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var i=a(1).default;t.exports.__inject__=function(t){i("06c4077b",e,!0,t)}},50:function(t,n,a){"use strict";var e={},i=a(0);var o=Object(i.a)(e,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"loading"},[this._ssrNode('<div class="spinner" data-v-f8a5840a><i data-v-f8a5840a></i></div>')])},[],!1,function(t){var n=a(63);n.__inject__&&n.__inject__(t)},"f8a5840a","17420839");n.a=o.exports},53:function(t,n,a){var e=a(71);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var i=a(1).default;t.exports.__inject__=function(t){i("4309fc1b",e,!0,t)}},54:function(t,n,a){var e=a(73);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var i=a(1).default;t.exports.__inject__=function(t){i("574ee486",e,!0,t)}},55:function(t,n,a){var e=a(75);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var i=a(1).default;t.exports.__inject__=function(t){i("413b79fc",e,!0,t)}},56:function(t,n,a){var e=a(77);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var i=a(1).default;t.exports.__inject__=function(t){i("6af977e8",e,!0,t)}},57:function(t,n,a){var e=a(79);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var i=a(1).default;t.exports.__inject__=function(t){i("0c3019ef",e,!0,t)}},58:function(t,n,a){var e=a(81);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var i=a(1).default;t.exports.__inject__=function(t){i("63289c83",e,!0,t)}},62:function(t,n,a){(t.exports=a(2)(!1)).push([t.i,'.spinner[data-v-f8a5840a] {\n  font-size: 20px;\n  width: 30px;\n  height: 30px;\n  margin: 100px auto;\n  border-radius: 50%;\n  box-shadow: inset 0 0 0 0.1em rgba(0,156,255,0.3);\n}\n.spinner i[data-v-f8a5840a] {\n  animation: spinner-circle-clipper-data-v-f8a5840a 1s ease-in-out infinite;\n}\n.spinner i[data-v-f8a5840a],\n.spinner i[data-v-f8a5840a]:after {\n  display: inline-block;\n  position: absolute;\n  clip: rect(0, 30px, 30px, 15px);\n  width: 30px;\n  height: 30px;\n}\n.spinner i[data-v-f8a5840a]:after {\n  content: "";\n  animation: spinner-circle-data-v-f8a5840a 1s ease-in-out infinite;\n  border-radius: 50%;\n  box-shadow: inset 0 0 0 3px $blue-color;\n}\n@-moz-keyframes spinner-circle-clipper-data-v-f8a5840a {\n0% {\n    transform: rotate(0deg);\n}\nto {\n    transform: rotate(180deg);\n}\n}\n@-webkit-keyframes spinner-circle-clipper-data-v-f8a5840a {\n0% {\n    transform: rotate(0deg);\n}\nto {\n    transform: rotate(180deg);\n}\n}\n@-o-keyframes spinner-circle-clipper-data-v-f8a5840a {\n0% {\n    transform: rotate(0deg);\n}\nto {\n    transform: rotate(180deg);\n}\n}\n@keyframes spinner-circle-clipper-data-v-f8a5840a {\n0% {\n    transform: rotate(0deg);\n}\nto {\n    transform: rotate(180deg);\n}\n}\n@-moz-keyframes spinner-circle-data-v-f8a5840a {\n0% {\n    transform: rotate(-180deg);\n}\nto {\n    transform: rotate(180deg);\n}\n}\n@-webkit-keyframes spinner-circle-data-v-f8a5840a {\n0% {\n    transform: rotate(-180deg);\n}\nto {\n    transform: rotate(180deg);\n}\n}\n@-o-keyframes spinner-circle-data-v-f8a5840a {\n0% {\n    transform: rotate(-180deg);\n}\nto {\n    transform: rotate(180deg);\n}\n}\n@keyframes spinner-circle-data-v-f8a5840a {\n0% {\n    transform: rotate(-180deg);\n}\nto {\n    transform: rotate(180deg);\n}\n}\n',""])},63:function(t,n,a){"use strict";a.r(n);var e=a(44),i=a.n(e);for(var o in e)"default"!==o&&function(t){a.d(n,t,function(){return e[t]})}(o);n.default=i.a},71:function(t,n,a){(t.exports=a(2)(!1)).push([t.i,".post-detail {\n  width: 700px;\n  margin: 30px auto;\n}\n.post-detail a {\n  color: rgba(255,255,255,0.8);\n}\n.post-detail .avatar {\n  display: flex;\n  position: relative;\n  align-items: center;\n  padding: 10px;\n  margin-bottom: 20px;\n  justify-content: center;\n}\n.post-detail .avatar img {\n  width: 40px;\n  height: 40px;\n  border-radius: 30px;\n  border: 10px solid rgba(255,255,255,0.05);\n}\n.post-detail .avatar span {\n  padding: 0 15px;\n}\n.post-detail .post {\n  padding: 15px;\n  background: rgba(255,255,255,0.05);\n  border-radius: 4px;\n  position: relative;\n}\n.post-detail .post .title {\n  font-size: 20px;\n  padding: 10px;\n  color: rgba(255,255,255,0.8);\n  text-align: center;\n}\n.post-detail .post .info {\n  text-align: center;\n  padding: 10px 0 15px 0;\n}\n.post-detail .post .info span {\n  padding: 3px 8px;\n  font-size: 11px;\n  background: #184d6b;\n  color: #fff;\n  border-radius: 2px;\n  margin: 0 5px;\n}\n.post-detail .post .content img {\n  max-width: 100%;\n  box-sizing: border-box;\n  padding: 15px;\n  background: #001935;\n  border-radius: 5px;\n  margin: 5px 0;\n}\n.post-detail .post .content p {\n  padding: 10px 0;\n  line-height: 1.5;\n  word-wrap: break-word;\n}\n.post-detail .post .content ol {\n  display: block;\n}\n.post-detail .post .content ol li {\n  display: inline-block;\n  padding: 5px 15px;\n  background: #35355a;\n  margin: 5px 10px 10px 0;\n  box-sizing: border-box;\n  border: 1px solid #35355a;\n}\n.post-detail .post .content ol li a {\n  font-weight: normal;\n}\n.post-detail .post .content ol li:hover {\n  border: 1px solid #00fff6;\n  box-sizing: border-box;\n}\n.post-detail .post .content a {\n  color: #fff;\n  font-weight: bold;\n}\n.post-detail .count {\n  background: rgba(255,255,255,0.05);\n  padding: 5px 15px;\n  border-radius: 25px;\n  float: right;\n  margin-right: 10px;\n}\n.post-detail .count .icon-font {\n  margin-right: 8px;\n}\n.post-detail .count:hover {\n  background: #00fff6;\n}\n",""])},72:function(t,n,a){"use strict";a.r(n);var e=a(53),i=a.n(e);for(var o in e)"default"!==o&&function(t){a.d(n,t,function(){return e[t]})}(o);n.default=i.a},73:function(t,n,a){(t.exports=a(2)(!1)).push([t.i,".video-list[data-v-1aa605ce] {\n  padding-top: 20px;\n}\n.video-list .addBtn[data-v-1aa605ce] {\n  text-align: center;\n  padding: 20px;\n}\n.video-list .addBtn span[data-v-1aa605ce] {\n  padding: 5px 40px;\n  background: #009cff;\n  color: #fff;\n  border-radius: 20px;\n  font-size: 16px;\n  font-weight: bold;\n  cursor: pointer;\n}\n.video-list .wrapper[data-v-1aa605ce] {\n  background: rgba(18,19,22,0.6);\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  z-index: 99999;\n}\n.video-list .addVideo[data-v-1aa605ce] {\n  width: 500px;\n  padding: 20px;\n  background: rgba(255,255,255,0.05);\n  position: fixed;\n  z-index: 999999;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  box-shadow: 1px 1px 5px #090c13;\n}\n.video-list .addVideo li[data-v-1aa605ce] {\n  width: 100%;\n  padding: 8px 15px;\n  box-sizing: border-box;\n}\n.video-list .addVideo li input[data-v-1aa605ce] {\n  width: 100%;\n  padding: 5px;\n  color: #fff;\n  background: #001935;\n  letter-spacing: 3px;\n  box-sizing: border-box;\n}\n.video-list .addVideo li button[data-v-1aa605ce] {\n  background: #009cff;\n  width: 100%;\n  padding: 5px;\n  color: #fff;\n  outline: none;\n  cursor: pointer;\n  margin-top: 10px;\n}\n.video-list .list ul li[data-v-1aa605ce] {\n  width: 50%;\n  box-sizing: border-box;\n  display: inline-block;\n}\n.video-list .list ul li .item[data-v-1aa605ce] {\n  cursor: pointer;\n  margin: 10px;\n  background: rgba(255,255,255,0.05);\n  padding: 5px;\n  border-radius: 5px;\n  display: flex;\n  align-items: center;\n}\n.video-list .list ul li .avatar img[data-v-1aa605ce] {\n  border: none;\n  height: 30px;\n  width: 30px;\n}\n.video-list .list ul li .avatar[data-v-1aa605ce] {\n  margin: 0;\n  padding: 0;\n}\n.video-list .list ul li .oid[data-v-1aa605ce] {\n  font-weight: bold;\n}\n.video-list .list ul li .avatar[data-v-1aa605ce],\n.video-list .list ul li .oid[data-v-1aa605ce],\n.video-list .list ul li .title[data-v-1aa605ce],\n.video-list .list ul li .content[data-v-1aa605ce] {\n  margin: 0 10px;\n}\n.video-list .list li:nth-child(even) .item[data-v-1aa605ce] {\n  margin-right: 0;\n}\n.video-list .list li:nth-child(odd) .item[data-v-1aa605ce] {\n  margin-left: 0;\n}\n",""])},74:function(t,n,a){"use strict";a.r(n);var e=a(54),i=a.n(e);for(var o in e)"default"!==o&&function(t){a.d(n,t,function(){return e[t]})}(o);n.default=i.a},75:function(t,n,a){(t.exports=a(2)(!1)).push([t.i,".player-wrap {\n  position: absolute;\n  width: 800px;\n  height: 450px;\n  background: #000;\n}\n.player-wrap .play {\n  width: 800px;\n  height: 450px;\n  background: #000;\n  position: fixed;\n  z-index: 9;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -60%);\n  box-shadow: 1px 1px 5px #090c13;\n}\n.player-wrap .play .danmu {\n  position: absolute;\n  top: 0;\n}\n.player-wrap .wrapper {\n  background: rgba(0,0,0,0.8);\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  z-index: 9;\n}\n.player-wrap .close {\n  z-index: 9;\n  position: absolute;\n  top: -15px;\n  right: -27px;\n  cursor: pointer;\n}\n.player-wrap .close .icon-close {\n  font-size: 30px;\n  background: #00fff6;\n  border-radius: 50%;\n  padding: 10px;\n  color: #001935;\n}\n",""])},76:function(t,n,a){"use strict";a.r(n);var e=a(55),i=a.n(e);for(var o in e)"default"!==o&&function(t){a.d(n,t,function(){return e[t]})}(o);n.default=i.a},77:function(t,n,a){(t.exports=a(2)(!1)).push([t.i,".comment[data-v-17299371] {\n  color: #fff !important;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  background: #001935;\n  padding: 10px;\n  z-index: 9999999;\n}\n.comment .comment-box[data-v-17299371] {\n  display: flex;\n  align-items: center;\n}\n.comment .comment-avatar[data-v-17299371] {\n  margin-right: 20px;\n  height: 40px;\n  width: 40px;\n}\n.comment .comment-avatar img[data-v-17299371] {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n}\n.comment .add-text[data-v-17299371] {\n  flex: 1;\n  text-align: center;\n}\n.comment .add-text input[data-v-17299371] {\n  border-radius: 5px;\n  width: 100%;\n  background: #21374f;\n  padding: 8px;\n  resize: none;\n  box-sizing: border-box;\n  color: #fff;\n  font-size: 20px;\n  outline: none;\n}\n.comment .option[data-v-17299371] {\n  position: relative;\n}\n.comment .submit[data-v-17299371] {\n  display: inline-block;\n  margin-left: 20px;\n}\n.comment .submit button[data-v-17299371] {\n  background: #00fff6;\n  color: #001935;\n  padding: 5px 20px;\n  cursor: pointer;\n  outline: none;\n  font-size: 18px;\n  border-radius: 2px;\n  font-weight: bold;\n}\n.comment .submit .icon-send[data-v-17299371] {\n  font-size: 20px;\n  margin-right: 15px;\n}\n.comment .dm-opt[data-v-17299371] {\n  padding: 10px;\n  background: #001935;\n  position: absolute;\n  bottom: 60px;\n  right: -125px;\n  width: 260px;\n}\n.comment .dm-opt p[data-v-17299371] {\n  padding: 10px;\n}\n.comment .dm-opt p i[data-v-17299371] {\n  display: inline-block;\n  height: 25px;\n  width: 25px;\n  margin: 5px;\n  border-radius: 50%;\n  cursor: pointer;\n}\n.comment .dm-opt p span[data-v-17299371] {\n  background: rgba(255,255,255,0.05);\n  padding: 5px 30px;\n  cursor: pointer;\n  display: inline-block;\n}\n.comment .dm-opt p .active[data-v-17299371] {\n  background: #fff;\n  color: #333;\n}\n.comment .icon-color[data-v-17299371] {\n  font-size: 40px;\n  margin-left: 20px;\n  cursor: pointer;\n}\n.comment .need-login span[data-v-17299371] {\n  background: #ff005e;\n  padding: 2px 8px;\n  border-radius: 4px;\n  margin-right: 20px;\n  cursor: pointer;\n}\n.dm-opt span[data-v-17299371]:nth-child(1) {\n  border-radius: 5px 0 0 5px;\n}\n.dm-opt span[data-v-17299371]:nth-child(3) {\n  border-radius: 0 5px 5px 0;\n  border-left: none;\n}\n",""])},78:function(t,n,a){"use strict";a.r(n);var e=a(56),i=a.n(e);for(var o in e)"default"!==o&&function(t){a.d(n,t,function(){return e[t]})}(o);n.default=i.a},79:function(t,n,a){(t.exports=a(2)(!1)).push([t.i,".switch[data-v-50011aff] {\n  position: relative;\n  margin-left: 20px;\n}\n.switch .switch-component[data-v-50011aff] {\n  width: 70px;\n  height: 36px;\n  background-color: #000;\n  border-radius: 36px;\n  border: none;\n  outline: none;\n  -webkit-appearance: none;\n  transition: all 0.2s ease;\n  cursor: pointer;\n}\n.switch .dan[data-v-50011aff] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 50%;\n  height: 36px;\n  background: rgba(255,255,255,0.05);\n  border-radius: 50%;\n  transition: all 0.2s ease;\n  display: inline-block;\n  text-align: center;\n  line-height: 36px;\n}\n.switch .switch-component[data-v-50011aff]:checked {\n  background-color: #8e2b4f;\n}\n.switch .switch-component:checked + .dan[data-v-50011aff] {\n  left: 50%;\n  color: #fff;\n  background: #ff005e;\n}\n",""])},80:function(t,n,a){"use strict";a.r(n);var e=a(57),i=a.n(e);for(var o in e)"default"!==o&&function(t){a.d(n,t,function(){return e[t]})}(o);n.default=i.a},81:function(t,n,a){(t.exports=a(2)(!1)).push([t.i,".comment-list .add-comment[data-v-614101d9] {\n  margin: 30px 0;\n  display: flex;\n  align-items: center;\n}\n.comment-list .add-comment .add-avatar[data-v-614101d9] {\n  margin-right: 15px;\n}\n.comment-list .add-comment .add-avatar img[data-v-614101d9] {\n  height: 40px;\n  width: 40px;\n  border-radius: 50%;\n}\n.comment-list .add-content[data-v-614101d9] {\n  flex: 1;\n}\n.comment-list .add-content input[data-v-614101d9] {\n  width: 100%;\n  background: rgba(255,255,255,0.05);\n  border-radius: 20px;\n  padding: 10px 20px;\n  box-sizing: border-box;\n  color: #fff;\n}\n.comment-list .need-login[data-v-614101d9] {\n  flex: 1;\n  text-align: center;\n}\n.comment-list .need-login span[data-v-614101d9] {\n  padding: 2px 10px;\n  background: #ff005e;\n  color: #fff;\n  margin-right: 10px;\n  border-radius: 4px;\n  cursor: pointer;\n}\n.comment-list button[data-v-614101d9] {\n  padding: 10px 20px;\n  color: #fff;\n  margin-left: 10px;\n  background: #ff005e;\n  border-radius: 20px;\n  cursor: pointer;\n  outline: none;\n}\n.comment-list button i[data-v-614101d9] {\n  padding-right: 10px;\n}\n.comment-list h2[data-v-614101d9] {\n  text-align: center;\n  padding: 20px;\n  font-size: 16px;\n}\n.comment-list h2 span[data-v-614101d9] {\n  color: #ff005e;\n}\n.comment-list li[data-v-614101d9] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  position: relative;\n}\n.comment-list li .comment-avatar[data-v-614101d9] {\n  display: inline-block;\n  width: 60px;\n  text-align: center;\n}\n.comment-list li .comment-avatar img[data-v-614101d9] {\n  height: 50px;\n  width: 50px;\n  border-radius: 50%;\n}\n.comment-list li .text[data-v-614101d9],\n.comment-list li .add-text[data-v-614101d9] {\n  flex: 1;\n  padding: 0 20px 0 30px;\n  position: relative;\n  font-size: 13px;\n  font-weight: bold;\n}\n.comment-list li .text .name[data-v-614101d9],\n.comment-list li .add-text .name[data-v-614101d9] {\n  padding-bottom: 10px;\n  font-size: 12px;\n  color: rgba(255,255,255,0.8);\n}\n.comment-list li .text .name span[data-v-614101d9],\n.comment-list li .add-text .name span[data-v-614101d9] {\n  padding: 2px 15px;\n  margin-right: 10px;\n  cursor: pointer;\n  color: #fff;\n  background: #ff005e;\n  border-radius: 10px;\n}\n.comment-list li time[data-v-614101d9] {\n  font-size: 11px;\n}\n.comment-list li[data-v-614101d9]:nth-child(even) {\n  background: rgba(255,255,255,0.05);\n  border-radius: 5px;\n}\n",""])},82:function(t,n,a){"use strict";a.r(n);var e=a(58),i=a.n(e);for(var o in e)"default"!==o&&function(t){a.d(n,t,function(){return e[t]})}(o);n.default=i.a},95:function(t,n,a){"use strict";a.r(n);var e=a(4),i=a(5),o=a.n(i);const s=o.a.create({baseURL:e.b});function d(t){return o.a.get(`https://jx.clicli.us/get/pv?pid=${t}`)}var r=a(3),c=a(17),l=a(50),p=a(42),u=a.n(p);const v=o.a.create({baseURL:e.b});function m({content:t,pid:n,uid:a,vid:e,tuid:i,time:s,color:d}){return o.a.post("/comment/add",{content:t,pid:parseInt(n),uid:parseInt(a),vid:e||1,color:d||"#fff",tuid:i||0,time:s||0})}var f=a(18),h=a.n(f);var g=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])}return t},x={props:["count"],data:()=>({comments:[],uqq:h.a.get("uqq"),content:""}),mounted(){this.getComment()},methods:g({onComment(){this.content?m({pid:Object(e.c)(this.$route.params.id),uid:h.a.get("uid"),content:this.content,vid:1}).then(t=>{this.content="",this.getComment(),this.count++,console.log(t.data.code)}):this.msg="不能不填！"},getComment(){(function(t,n,a){return v.get("/comments",{params:{pid:t,page:n,pageSize:a}})})(Object(e.c)(this.$route.params.id),1,100).then(t=>{200===t.data.code&&(this.comments=t.data.comments,this.content="")})},onLogin(){this.isOnLogin(!0)},getAvatar:t=>Object(e.d)(t)},Object(r.mapMutations)(["isOnLogin"]))},b=a(0);var _=Object(b.a)(x,function(){var t=this,n=t.$createElement;return(t._self._c||n)("div",{staticClass:"comment-list"},[t._ssrNode('<div class="add-comment" data-v-614101d9><div class="add-avatar" data-v-614101d9><img'+t._ssrAttr("src",t.getAvatar(t.uqq))+" data-v-614101d9></div> "+(t.uqq?'<div class="add-content" data-v-614101d9><input type="text" placeholder="回复一下下菊花又不会坏(⊙o⊙)…"'+t._ssrAttr("value",t.content)+" data-v-614101d9></div>":"\x3c!----\x3e")+" "+(t.uqq?"\x3c!----\x3e":'<div class="need-login" data-v-614101d9><span data-v-614101d9>登陆</span> <a href="https://admin.clicli.top/register" data-v-614101d9>注册</a></div>')+' <button data-v-614101d9><i class="icon-font icon-send" data-v-614101d9></i>发射！</button></div> <h2 data-v-614101d9>共有 '+(t.count?"<span data-v-614101d9>"+t._ssrEscape(t._s(t.count))+"</span>":"\x3c!----\x3e")+" 条吐槽</h2> <ul data-v-614101d9>"+t._ssrList(t.comments,function(n){return'<li data-v-614101d9><div class="comment-avatar" data-v-614101d9><img'+t._ssrAttr("src",t.getAvatar(n.uqq))+' data-v-614101d9></div> <div class="text" data-v-614101d9><p class="name" data-v-614101d9>'+t._ssrEscape(t._s(n.uname))+"</p> <p data-v-614101d9>"+t._ssrEscape(t._s(n.content))+"</p></div> <time data-v-614101d9>"+t._ssrEscape(t._s(n.ctime))+"</time></li>"})+"</ul>")])},[],!1,function(t){var n=a(82);n.__inject__&&n.__inject__(t)},"614101d9","15fd0c58").exports;
/*!
** by zhangxinxu(.com)
** 与HTML5 video视频真实交互的弹幕效果
** http://www.zhangxinxu.com/wordpress/?p=6386
** MIT License
** 保留版权申明
*/
const y=function(t,n,a){if(!t||!n)return;let e={opacity:100,fontSize:24,speed:2,range:[0,1],color:"white",data:[]};a=a||{};let i={};for(let t in e)a[t]?i[t]=a[t]:i[t]=e[t],this[t]=i[t];let o=this,s=o.data,d=t.getContext("2d");t.width=n.clientWidth,t.height=n.clientHeight;let r={},c=!0,l=n.currentTime,p=function(n){this.value=n.value,this.time=n.time,this.init=function(){let a=o.speed;n.hasOwnProperty("speed")&&(a=n.speed),0!==a&&(a+=n.value.length/100);let e=n.fontSize||o.fontSize,i=n.color||o.color;i=function(){let t=document.createElement("div");t.style.backgroundColor=i,document.body.appendChild(t);let n=window.getComputedStyle(t).backgroundColor;return document.body.removeChild(t),n}();let s=n.range||o.range,d=n.opacity||o.opacity;d/=100;let r=document.createElement("span");r.style.position="absolute",r.style.whiteSpace="nowrap",r.style.font="bold "+e+'px "microsoft yahei", sans-serif',r.innerText=n.value,r.textContent=n.value,document.body.appendChild(r),this.width=r.clientWidth,document.body.removeChild(r),this.x=t.width,0===a&&(this.x=(this.x-this.width)/2),this.actualX=t.width,this.y=s[0]*t.height+(s[1]-s[0])*t.height*Math.random(),this.y<e?this.y=e:this.y>t.height-e&&(this.y=t.height-e),this.moveX=a,this.opacity=d,this.color=i,this.range=s,this.fontSize=e},this.draw=function(){d.shadowColor="rgba(0,0,0,"+this.opacity+")",d.shadowBlur=2,d.font=this.fontSize+'px "microsoft yahei", sans-serif',/rgb\(/.test(this.color)?d.fillStyle="rgba("+this.color.split("(")[1].split(")")[0]+","+this.opacity+")":d.fillStyle=this.color,d.fillText(this.value,this.x,this.y)}};s.forEach(function(t,n){r[n]=new p(t)});let u=function(){l=n.currentTime,d.clearRect(0,0,t.width,t.height),function(){for(let t in r){let n=r[t];n&&!n.disabled&&l>=n.time&&(n.inited||(n.init(),n.inited=!0),n.x-=n.moveX,0===n.moveX?n.actualX-=o.speed:n.actualX=n.x,n.actualX<-1*n.width&&(n.x=n.actualX,n.disabled=!0),n.draw())}}(),!1===c&&requestAnimationFrame(u)};n.addEventListener("play",function(){c=!1,u()}),n.addEventListener("pause",function(){c=!0}),n.addEventListener("seeked",function(){o.reset()}),this.add=function(t){r[Object.keys(r).length]=new p(t)},this.reset=function(){l=n.currentTime,d.clearRect(0,0,t.width,t.height);for(let t in r){let n=r[t];n&&(n.disabled=!1,l<n.time?n.inited=null:n.disabled=!0)}}};var w={data:()=>({val:"yes"}),methods:{switchDan(){this.val="yes"===this.val?"":"yes","yes"===this.val?this.$emit("openDm"):this.$emit("closeDm")}}};var k=Object(b.a)(w,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"switch"},[this._ssrNode('<input value="yes" type="radio"'+this._ssrAttr("checked",this._q(this.val,"yes"))+' class="switch-component" data-v-50011aff> <span class="dan" data-v-50011aff>弹</span>')])},[],!1,function(t){var n=a(80);n.__inject__&&n.__inject__(t)},"50011aff","77fcf0d7").exports,j=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])}return t},O={data:()=>({title:"",user:{},isShow:!1,optShow:!1,adminLink:e.a,uqq:h.a.get("uqq"),data:{color:"#fff",value:""}}),mounted(){this.isShow=!0},computed:j({},Object(r.mapGetters)(["isLogin","vid","tuid"])),methods:j({showOpt(){this.optShow=!this.optShow},color(t){this.data.color=t.target.style.background},openDm(){let t=document.getElementById("ep-canvas");"none"===t.style.display&&(t.style.display="block")},closeDm(){document.getElementById("ep-canvas").style.display="none"},getAvatar:t=>Object(e.d)(t),onLogin(){this.isOnLogin(!0)},onComment(){if(this.$emit("addDm",this.data),!this.data.value)return void(this.msg="不能不填！");let t=Math.round(document.querySelector("e-player").shadowRoot.querySelector("video").currentTime);this.$emit("add",{value:this.data.value,time:t,color:this.data.color}),m({pid:Object(e.c)(this.$route.params.id),uid:h.a.get("uid"),content:this.data.value,vid:this.vid,time:t,color:this.data.color}).then(t=>{this.data.value="",console.log(t.data.code)})}},Object(r.mapMutations)(["isOnLogin","setCurrentTime"])),components:{SwitchButton:k}};var S=Object(b.a)(O,function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"comment"},[t._ssrNode('<div class="wrap comment-box" data-v-17299371>',"</div>",[t._ssrNode('<div class="comment-avatar" data-v-17299371><img'+t._ssrAttr("src",t.getAvatar(t.uqq))+' data-v-17299371></div> <div class="add-text" data-v-17299371>'+(t.isShow?'<input placeholder="回复一下下菊花又不会坏……"'+t._ssrAttr("value",t.data.value)+" data-v-17299371>":"\x3c!----\x3e")+" "+(t.isShow?"\x3c!----\x3e":'<div class="need-login" data-v-17299371><span data-v-17299371>登陆</span> <a'+t._ssrAttr("href",t.adminLink+"/register")+" data-v-17299371>注册</a></div>")+"</div> "),a("switch-button",{on:{closeDm:t.closeDm,openDm:t.openDm}}),t._ssrNode(' <div class="option" data-v-17299371><div class="color" data-v-17299371><i class="icon-font icon-color"'+t._ssrStyle(null,{color:t.data.color},null)+' data-v-17299371></i></div> <div class="dm-opt"'+t._ssrStyle(null,null,{display:t.optShow?"":"none"})+' data-v-17299371><p data-v-17299371>设置弹幕颜色</p> <p data-v-17299371><i style="background:#FFFFFF" data-v-17299371></i> <i style="background:#E54256" data-v-17299371></i> <i style="background:#f9a100" data-v-17299371></i> <i style="background:#FFE133" data-v-17299371></i> <i style="background:#64DD17" data-v-17299371></i> <i style="background:#00f9d7" data-v-17299371></i> <i style="background:#39ccff" data-v-17299371></i> <i style="background:#D500F9" data-v-17299371></i></p> <p data-v-17299371>设置弹幕位置</p> <p data-v-17299371><span data-v-17299371>上</span><span class="active" data-v-17299371>中</span><span data-v-17299371>下</span></p></div></div> <div class="submit" data-v-17299371><button data-v-17299371><i class="icon-font icon-send" data-v-17299371></i>发射</button></div>')],2)])},[],!1,function(t){var n=a(78);n.__inject__&&n.__inject__(t)},"17299371","50552e5c").exports,z={props:["url","type","playerShow"],computed:(Object.assign||function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])}return t})({},Object(r.mapGetters)(["danmuku"])),data:()=>({isMobile:!1}),mounted(){"ontouchend"in document.body&&(this.isMobile=!0)},watch:{url(){setTimeout(()=>{if(this.isMobile){const t=document.querySelector("video");this.stream(t),t.load()}else{const t=document.querySelector("e-player").shadowRoot.querySelector("video"),n=document.querySelector(".danmu");let a=this.forDanmu(this.danmuku);this.dm=new y(n,t,{data:a})}},20)}},methods:{stream(t){switch(this.type){case"hls":if(Hls.isSupported()){let n=new Hls;n.loadSource(this.url),n.attachMedia(t)}}},add(t){this.dm.add(t)},getType(){return`video/${this.type}`},forDanmu(t){let n=[];for(let a in t){let e={};e.value=t[a].content,e.time=t[a].time,e.color=t[a].color,n[a]=e}return n},hide(){this.$emit("hide")}},components:{Comment:S}};var C=Object(b.a)(z,function(){var t=this,n=t.$createElement,a=t._self._c||n;return t.playerShow?a("div",{staticClass:"player-wrap"},[t._ssrNode('<div class="wrapper"></div> '),t._ssrNode('<div class="play">',"</div>",[t.isMobile?t._e():a("e-player",{attrs:{src:t.url,type:t.type}}),t._ssrNode(" "+(t.isMobile?"\x3c!----\x3e":'<canvas class="danmu"></canvas>')+" "+(t.isMobile?'<div class="mobile"><video controls="controls" style="width: 100%"><source'+t._ssrAttr("type",t.getType())+t._ssrAttr("src",t.url)+"></video></div>":"\x3c!----\x3e")+' <div class="close"><i class="icon-font icon-close"></i></div>')],2),t._ssrNode(" "),a("comment",{on:{add:t.add}})],2):t._e()},[],!1,function(t){var n=a(76);n.__inject__&&n.__inject__(t)},null,"26b94b19").exports,q=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])}return t},E={data(){return{videos:[],addShow:!1,isShow:!1,playerShow:!1,title:"",content:"",pid:Object(e.c)(this.$route.params.id),uid:0,url:"",type:""}},mounted(){const t=h.a.get("level");this.uid=h.a.get("uid"),t>2&&(this.isShow=!0),function(t,n,a){return s.get("/videos",{params:{pid:t,page:n,pageSize:a}})}(this.pid,1,150).then(t=>{200===t.data.code&&(this.videos=t.data.videos)})},computed:q({},Object(r.mapState)(["vid"])),methods:q({hide(){this.addShow=!1,this.playerShow=!1,document.body.style.overflow="auto"},selectItem({id:t,content:n},a){this.playerShow=!0,this.setVid(t),d(this.pid),function(t,n,a){return v.get("/comments",{params:{vid:t,page:n,pageSize:a}})}(t,1,100).then(t=>{this.getDanmuku(t.data.comments)}),function(t){return o.a.get("https://jx.clicli.us/jx",{params:{url:t}})}(n).then(t=>{this.url=t.data.url,this.type=t.data.type}),document.body.style.overflow="hidden",a.currentTarget.style.background="#21374f"},getAvatar:t=>Object(e.d)(t)},Object(r.mapMutations)(["setVid","getDanmuku"])),components:{Player:C}};var $=Object(b.a)(E,function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"video-list"},[t._ssrNode('<div class="wrapper"'+t._ssrStyle(null,null,{display:t.addShow?"":"none"})+" data-v-1aa605ce></div> "),a("player",{attrs:{url:t.url,type:t.type,playerShow:t.playerShow},on:{hide:t.hide}}),t._ssrNode(' <div class="list" data-v-1aa605ce><ul data-v-1aa605ce>'+t._ssrList(t.videos,function(n){return'<li data-v-1aa605ce><div class="item" data-v-1aa605ce><div class="avatar" data-v-1aa605ce><img'+t._ssrAttr("src",t.getAvatar(n.uqq))+' data-v-1aa605ce></div> <div class="oid" data-v-1aa605ce>'+t._ssrEscape("P"+t._s(n.oid))+'</div> <div class="title" data-v-1aa605ce>'+t._ssrEscape(t._s(n.title))+"</div></div></li>"})+"</ul></div>")],2)},[],!1,function(t){var n=a(74);n.__inject__&&n.__inject__(t)},"1aa605ce","4cec0850").exports,A=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])}return t},N={mixins:[c.a],data:()=>({playCount:0}),title(){return this.$store.state.post.title+"- clicli弹幕网"},computed:A({},Object(r.mapGetters)(["post","count"])),mounted(){this.getPost(Object(e.c)(this.$route.params.id)),d(Object(e.c)(this.$route.params.id)).then(t=>{this.playCount=t.data.pv})},asyncData:({store:t,route:n})=>t.dispatch("getPost",Object(e.c)(n.params.id)),methods:A({},Object(r.mapActions)(["getPost"]),{getAvatar:t=>Object(e.d)(t),marked(t){let n=new u.a.Renderer;return u.a.setOptions({breaks:!0}),n.link=function(t,n,a){return'<a target="_blank" href="'+t+'" title="'+n+'">'+a+"</a>"},void 0===t?"少年祈祷中……":u()(t,{renderer:n})}}),components:{Loading:l.a,CommentList:_,VideoList:$}};var L=Object(b.a)(N,function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"post-detail"},[a("router-link",{attrs:{to:"/u/"+t.post.uid}},[a("div",{staticClass:"avatar"},[a("img",{attrs:{src:t.getAvatar(t.post.uqq)}}),t._v(" "),a("span",[t._v(t._s(t.post.uname))]),t._v(" "),t.post.count?a("div",{staticClass:"count"},[a("i",{staticClass:"icon-font icon-comment"}),t._v(t._s(t.post.count.cv))]):t._e(),t._v(" "),a("div",{staticClass:"count"},[a("i",{staticClass:"icon-font icon-eye"}),t._v(t._s(t.playCount)+" ℃")])])]),t._ssrNode(" "),t._ssrNode('<div class="post">',"</div>",[a("loading",{directives:[{name:"show",rawName:"v-show",value:!t.post.uname,expression:"!post.uname"}]}),t._ssrNode(" "),t._ssrNode("<div"+t._ssrStyle(null,null,{display:t.post.uname?"":"none"})+">","</div>",[a("router-link",{attrs:{to:"/play/av"+t.post.id}},[a("h1",{staticClass:"title"},[t._v(t._s(t.post.title))])]),t._ssrNode(' <div class="info">'+(t.post.time?"<span>"+t._ssrEscape(t._s(t.post.time.slice(0,-3)))+"</span>":"\x3c!----\x3e")+" <span>"+t._ssrEscape(t._s(t.post.sort))+"</span> <span>"+t._ssrEscape(t._s(t.post.tag))+'</span></div> <div class="content">'+t._s(t.marked(t.post.content))+"</div>")],2)],2),t._ssrNode(" "),a("router-view"),t._ssrNode(" "),"public"===t.post.status||"ugc"===t.post.status?a("video-list"):t._e(),t._ssrNode(" "),t.post.count?a("comment-list",{attrs:{count:t.count}}):t._e()],2)},[],!1,function(t){var n=a(72);n.__inject__&&n.__inject__(t)},null,"92154248");n.default=L.exports}};